var link=document.querySelector(".feedback"),modal=document.querySelector(".feedback-section"),close=modal.querySelector(".modal-close"),mapLink=document.querySelector(".contacts-map"),mapPopup=document.querySelector(".hidden-modal-map"),mapClose=mapPopup.querySelector(".modal-close"),escapeButton=27,form=modal.querySelector(".write-us"),userName=modal.querySelector(".name-surname"),userMail=modal.querySelector(".mail"),userText=modal.querySelector(".textarea-style"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),storage?(userName.value=storage,userMail.focus()):storage?(userName.value=storage,userMail.value=storage,userText.focus()):userName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error")}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show-map")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show-map")}),form.addEventListener("submit",function(e){userName.value&&userMail.value&&userText.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userMail",userMail.value)):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){e.keyCode===escapeButton&&(modal.classList.contains("modal-show")||mapPopup.classList.contains("modal-show-map"))&&(modal.classList.remove("modal-show"),mapPopup.classList.remove("modal-show-map"),modal.classList.remove("modal-error"))});